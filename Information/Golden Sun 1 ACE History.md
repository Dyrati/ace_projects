# Golden Sun 1 ACE History

Way back on January 22, 2015, **Plexa** (veteran speedrunner/human encyclopedia in Golden Sun circles) asked about some unusual glitches occurring deep out of bounds in Tret Tree.  Unlike other maps, walking around out of bounds in Tret would often cause soft-locks or crashes.

**Teawater** (brilliant hacking scientist, aka **Fox** in GSHC forums, aka **Beyond** in GSHC discord) decided to look into it.  Normally, in Tret, when you jump on a leaf tile, the graphic changes to show that it's damaged, and the next time you jump on it, it breaks and you fall through.  The graphic change is simply a 32-bit write to an address 0x100 bytes away from the leaf.  Teawater realized that the game was interpreting some out of bounds data as leaf tiles.  Stepping on those phony leaves still triggered graphical writes to nearby WRAM, relative to the position of the leaf.

5 years later, on January 11, 2020, he found a way to use this ability to execute code in the region of memory that stores player data, such as names, inventories, stats, etc.  From 02010000 to 02020000, every 4 bytes corresponds to 1 tile, laid out left-right, top-bottom, with 0x80 tiles (0x200 bytes) per row.  Within every 4 bytes exists an "event number" for that tile, an index to a list of 12-byte entries in memory (the event list).  The event number of a tile determines whether it should teleport you to another room, whether you can talk to it, whether it's a chest, whether it's a leaf tile, etc.

Teawater realized that you could overwrite the 0xffffffff at the end of the event list to extend it into garbage data (data that is leftover from a previously loaded map).  He found a single map with the perfect garbage data, which could provide a leaf in the perfect spot to break the event list, and also had what looked to the game like an event entry that calls an address in player data when triggered.  However, progress halted there for another year.

Interest was revitalized on February 22, 2021 when Teawater posted about a fun theory he had for Tret: a way to overwrite Weapons Shop artifacts to obtain lategame items from the 2nd game.  **Fx** (TAS guru / speedrunner) played around with it, and accidentally had some really fun effects, like swapping characters from Isaac into Jenna, and corrupting the party such that there were 3 Isaacs and a Vermin on his team in battle.  He and Plexa found practical uses for any% too, such as removing a significant barrier to later parts of the world, and disabling random encounters.

Finally, more scientists (Zari and myself) joined the fray.  My goal was to activate "Debug Mode", a sort of "God-Mode" left in the game by developers for testing purposes.  It allows you to walk through walls, edit the flag bank directly, change color palettes, advance frame by frame, skip cutscenes, instakill enemies, or teleport to any map or room, including developer-only rooms with unique capabilities, and the end-credits.

Teawater described his event list corruption technique to us, so I tried it, and it worked.  CPU execution of the player data region of memory.  Progress halted there before because it was believed to be too difficult to do anything with that data.  The bit specification was quite unwieldy, plus it's executed in ARM mode, not thumb, further complicating matters.

But on 2/28/2021, I successfully activated Debug Mode using event list corruption combined with player inventory data obtainable in-game without cheat devices.  I had to create a subset of the full set of ARM instructions merged with in-game inventory data restrictions.  Since Debug comes with warp capabilities, speedrunners could warp to credits after activating it, cutting the estimated any% speedrun time in half (down from 3 hours to 1.5 hours).  I wrote several variations of the code to compact it, switching to using player names instead of inventories.

Teawater soon found the "Slot 8 glitch", which is activated when you open a menu when you have 8 players in your party.  The function responsible for drawing your HP and PP at the top of the screen allocates only enough space for 5 party members, and each additional party member overwrites 2 bytes of the stack.  The overwritten bytes from the 8th party member happens to stick around when you close the menu, and causes the game to write your coordinates to a different address than usual.  It effectively allowed us to place a leaf tile anywhere we could walk to, but only once per room load.  I used that glitch to modify various RAM addresses to essentially "fix" the garbage data of an early game map so that it could also trigger ACE.  Prior to that, we needed the garbage data of a lategame map.

Not long after that, I used a combination of names and inventories that both activated Debug Mode, and could trigger the CPU to execute from the flag bank, which was fully within our control thanks to Debug's built-in flag bank editor, therefore activating true ACE.